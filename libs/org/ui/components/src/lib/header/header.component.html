<header class="header">
  <div class="header__container">
    <div class="header__left">
      @if (logo) {
      <a [routerLink]="['/dashboard']" class="header__logo-link">
        <img [src]="logo" [alt]="title" class="header__logo" />
      </a>
      }
      <a [routerLink]="['/dashboard']" class="header__title">{{ title }}</a>
    </div>

    @if (menuItems.length > 0) {
    <nav class="header__nav" aria-label="Main navigation">
      @for (item of menuItems; track item.label) { @if (item.route) {
      <a
        [routerLink]="[item.route]"
        routerLinkActive="header__nav-link--active"
        class="header__nav-link"
        (click)="onMenuItemClick(item, $event)"
      >
        @if (item.icon) {
        <span class="header__nav-icon">{{ item.icon }}</span>
        }
        {{ item.label }}
      </a>
      } @else if (item.href) {
      <a [href]="item.href" class="header__nav-link" (click)="onMenuItemClick(item, $event)">
        @if (item.icon) {
        <span class="header__nav-icon">{{ item.icon }}</span>
        }
        {{ item.label }}
      </a>
      } @else {
      <button type="button" class="header__nav-link" (click)="onMenuItemClick(item, $event)">
        @if (item.icon) {
        <span class="header__nav-icon">{{ item.icon }}</span>
        }
        {{ item.label }}
      </button>
      } }
    </nav>
    } @if (showUserMenu && (userName || userMenuItems.length > 0)) {
    <div class="header__user">
      <button
        type="button"
        class="header__user-button"
        (click)="toggleUserMenu()"
        [attr.aria-expanded]="isUserMenuOpen"
        aria-label="User menu"
      >
        @if (userAvatar) {
        <img [src]="userAvatar" [alt]="userName || 'User'" class="header__user-avatar" />
        } @else {
        <div class="header__user-avatar header__user-avatar--placeholder">
          {{ userName?.charAt(0).toUpperCase() || 'U' }}
        </div>
        } @if (userName) {
        <span class="header__user-name">{{ userName }}</span>
        }
        <span class="header__user-arrow" [class.header__user-arrow--open]="isUserMenuOpen">
          â–¼
        </span>
      </button>
      @if (isUserMenuOpen) {
      <div class="header__user-menu">
        @for (item of userMenuItems; track item.label) { @if (item.route) {
        <a
          [routerLink]="[item.route]"
          class="header__user-menu-item"
          (click)="onUserMenuItemClick(item, $event)"
        >
          @if (item.icon) {
          <span class="header__user-menu-icon">{{ item.icon }}</span>
          }
          {{ item.label }}
        </a>
        } @else if (item.href) {
        <a
          [href]="item.href"
          class="header__user-menu-item"
          (click)="onUserMenuItemClick(item, $event)"
        >
          @if (item.icon) {
          <span class="header__user-menu-icon">{{ item.icon }}</span>
          }
          {{ item.label }}
        </a>
        } @else {
        <button
          type="button"
          class="header__user-menu-item"
          (click)="onUserMenuItemClick(item, $event)"
        >
          @if (item.icon) {
          <span class="header__user-menu-icon">{{ item.icon }}</span>
          }
          {{ item.label }}
        </button>
        } }
      </div>
      }
    </div>
    }
  </div>
</header>
